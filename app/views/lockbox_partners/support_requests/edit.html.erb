<div id="support-request-form" class="container">
  <%= form_with model: @support_request, url: lockbox_partner_support_request_path(@support_request), class: 'form' do |f| %>
    <h2>
      Edit support request
    </h2>
    <div class="form-group">
      <%= label_tag 'lockbox_action[eff_date]', 'Pick-up Date' %>
      <%= date_field_tag 'lockbox_action[eff_date]', nil, class: 'form-control' %>
    </div>
    <% if @lockbox_partner.nil? %>
      <div class="form-group">
        <%= f.label :lockbox_partner %>
        <%= f.select :lockbox_partner_id, options_for_select(active_lockbox_partner_select_options), {}, class: 'form-control' %>
      </div>
    <% end %>
    <div class="form-group">
      <%= f.label :name_or_alias, 'Client Alias' %>
      <small class="form-text text-muted">Please do not use legal name</small>
      <%= f.text_field :name_or_alias, class: 'form-control' %>
    </div>
    <div class="form-group">
      <%= f.label :client_ref_id, 'Client Reference ID' %>
      <%= f.text_field :client_ref_id, class: 'form-control' %>
    </div>
    <div class="form-group">
      <%= f.label :amount_breakdown %>
      <div class="support_case_transactions">
        <div class="entries">
          <%= f.fields_for :lockbox_transactions do |lt| %>
            <div>
              <div class="row">
                <div class="form-group col-4">
                  <%= lt.label :amount %>
                  <%= lt.text_field :amount, type: 'number', step: "0.01", class: 'form-control' %>
                </div>
                <div class="form-group col-5">
                  <%= lt.label :category, 'Support Type' %>
                  <%= lt.select :category, options_for_select(expense_category_select_options), prompt: '', class: 'form-control' %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
        <%= link_to 'Add more values +', '#', id: 'add_transaction' %>
      </div>
    </div>
    <legend id="total">Total: $0.00</legend>
    <div class="form-group">
      <%= f.label :urgency_flag %>
      <%= f.text_field :urgency_flag, class: 'form-control' %>
    </div>
    <%= f.submit "Submit", class: 'btn btn-primary' %>
  <% end %>
  <script id="transaction_template" type="text/template"><%= render partial: 'lockbox_partners/support_requests/lockbox_transaction_form' %></script>
</div>
